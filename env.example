# Brooks Trading Coach - Environment Variables
# Copy this file to .env and fill in your values

# ==================== SUPABASE (REQUIRED) ====================
# Get these from your Supabase project: Settings > API
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-role-key

# Database URL (PostgreSQL connection string from Supabase)
# Settings > Database > Connection string > URI
DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres

# ==================== LLM CONFIGURATION ====================
# LLM Configuration (via LiteLLM proxy)
# Default values are pre-configured - you can override if needed
LLM_API_KEY=key
LLM_BASE_URL=https://duet-litellm-api.winktech.net/v1
LLM_MODEL=anthropic/claude-sonnet-4.5

# Data Provider Configuration
# Options: yfinance (free, slow), polygon (fast, requires key), alpaca (requires key)
DATA_PROVIDER=polygon

# Polygon.io API Key (recommended - faster and more reliable)
# Get free key at: https://polygon.io/
POLYGON_API_KEY=key

# Alpaca (optional)
ALPACA_API_KEY=your_alpaca_api_key_here
ALPACA_SECRET_KEY=your_alpaca_secret_key_here

# Databento (for futures)
DATABENTO_API_KEY=key

# Robinhood (credentials entered in web UI, session stored locally)
# No API key needed - uses username/password login

# ==================== IBKR (AUTO-IMPORT) ====================
# IBKR Flex Web Service (read-only)
# In Client Portal: Reporting -> Flex Queries -> Flex Web Service Configuration
# You'll need:
# - A Flex Web Service token
# - A Flex Query ID (from a saved Flex query that includes Trades)
IBKR_FLEX_TOKEN=
IBKR_FLEX_QUERY_ID=

# Application Settings
LOG_LEVEL=INFO
OUTPUTS_DIR=outputs
CACHE_DIR=data/cache

# API Security (optional)
# When set, destructive endpoints (DELETE, etc.) require this key in X-API-Key header
# Leave empty or remove to disable authentication
APP_API_KEY=

# ==================== USER AUTHENTICATION ====================
# Authentication is handled by Supabase Auth
# JWT secret is managed by Supabase - no need to configure here
# Email verification is built into Supabase Auth

# App URL (used for redirects after auth)
APP_URL=http://localhost:8000

# Note: SMTP configuration is done in Supabase Dashboard
# Authentication > Email Templates for customization
# Supabase handles email delivery automatically

# Risk Controls (soft guardrails)
MAX_DAILY_LOSS_R=3.0
MAX_LOSING_STREAK=3
DEFAULT_RISK_PER_TRADE_PCT=1.0
