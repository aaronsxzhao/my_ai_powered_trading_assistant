# Brooks Trading Coach - Environment Variables
# Copy this file to .env and fill in your values

# LLM Configuration (via LiteLLM proxy)
# Default values are pre-configured - you can override if needed
LLM_API_KEY=key
LLM_BASE_URL=https://duet-litellm-api.winktech.net/v1
LLM_MODEL=anthropic/claude-sonnet-4.5

# Data Provider Configuration
# Options: yfinance (free, slow), polygon (fast, requires key), alpaca (requires key)
DATA_PROVIDER=polygon

# Polygon.io API Key (recommended - faster and more reliable)
# Get free key at: https://polygon.io/
POLYGON_API_KEY=key

# Alpaca (optional)
ALPACA_API_KEY=your_alpaca_api_key_here
ALPACA_SECRET_KEY=your_alpaca_secret_key_here

# Databento (for futures)
DATABENTO_API_KEY=key

# Robinhood (credentials entered in web UI, session stored locally)
# No API key needed - uses username/password login

# ==================== IBKR (AUTO-IMPORT) ====================
# IBKR Flex Web Service (read-only)
# In Client Portal: Reporting -> Flex Queries -> Flex Web Service Configuration
# You'll need:
# - A Flex Web Service token
# - A Flex Query ID (from a saved Flex query that includes Trades)
IBKR_FLEX_TOKEN=
IBKR_FLEX_QUERY_ID=

# Application Settings
LOG_LEVEL=INFO
DATABASE_URL=sqlite:///data/trades.db
OUTPUTS_DIR=outputs
CACHE_DIR=data/cache

# API Security (optional)
# When set, destructive endpoints (DELETE, etc.) require this key in X-API-Key header
# Leave empty or remove to disable authentication
APP_API_KEY=

# ==================== USER AUTHENTICATION ====================
# JWT secret for session tokens (auto-generated if not set)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET=
JWT_EXPIRATION_HOURS=24

# App URL (used in email links)
APP_URL=http://localhost:8000

# ==================== EMAIL (SMTP) ====================
# Required for email verification and password reset
# For Gmail: use App Password (not your regular password)
# Get App Password: Google Account > Security > 2-Step Verification > App Passwords
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=your-email@gmail.com
SMTP_USE_TLS=true

# Risk Controls (soft guardrails)
MAX_DAILY_LOSS_R=3.0
MAX_LOSING_STREAK=3
DEFAULT_RISK_PER_TRADE_PCT=1.0
