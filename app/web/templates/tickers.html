{% extends "base.html" %}

{% block title %}Manage Tickers - Brooks Trading Coach{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto space-y-8">
    <h1 class="text-3xl font-bold text-gray-900">Manage Tickers</h1>

    <!-- Add Ticker -->
    <div class="card">
        <h2 class="text-xl font-bold mb-4">‚ûï Add Ticker</h2>
        <form action="/api/tickers/add" method="POST" class="flex space-x-3">
            <input type="text" name="ticker" required 
                class="input flex-1" placeholder="AAPL" 
                style="text-transform: uppercase;">
            <button type="submit" class="btn btn-primary">Add</button>
        </form>
    </div>

    <!-- Current Tickers -->
    <div class="card">
        <h2 class="text-xl font-bold mb-4">üìà Your Watchlist ({{ tickers|length }} tickers)</h2>
        
        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
            {% for ticker in tickers %}
            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg group">
                <span class="font-bold text-lg">{{ ticker }}</span>
                <form action="/api/tickers/remove/{{ ticker }}" method="POST" class="opacity-0 group-hover:opacity-100 transition">
                    <button type="submit" class="text-red-500 hover:text-red-700 text-sm">‚úï</button>
                </form>
            </div>
            {% endfor %}
        </div>

        {% if not tickers %}
        <div class="text-center py-8 text-gray-500">
            <p>No tickers yet. Add some above!</p>
        </div>
        {% endif %}
    </div>

    <!-- Bulk Edit -->
    <div class="card">
        <h2 class="text-xl font-bold mb-4">üìù Bulk Edit</h2>
        <p class="text-gray-600 mb-4">Edit all tickers at once (one per line):</p>
        
        <form action="/api/tickers" method="POST" class="space-y-4">
            <textarea name="tickers" class="input font-mono" rows="10">{% for ticker in tickers %}{{ ticker }}
{% endfor %}</textarea>
            <div class="flex justify-end">
                <button type="submit" class="btn btn-primary">Save All</button>
            </div>
        </form>
    </div>

    <!-- Popular Tickers -->
    <div class="card">
        <h2 class="text-xl font-bold mb-4">üî• Popular Tickers</h2>
        <p class="text-gray-600 mb-4">Click to add:</p>
        
        <div class="flex flex-wrap gap-2">
            {% set popular = ['SPY', 'QQQ', 'AAPL', 'MSFT', 'NVDA', 'TSLA', 'AMD', 'META', 'GOOGL', 'AMZN', 'NFLX', 'BA', 'JPM', 'V', 'DIS'] %}
            {% for t in popular %}
                {% if t not in tickers %}
                <form action="/api/tickers/add" method="POST" class="inline">
                    <input type="hidden" name="ticker" value="{{ t }}">
                    <button type="submit" class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm hover:bg-blue-100 transition">
                        + {{ t }}
                    </button>
                </form>
                {% else %}
                <span class="px-3 py-1 bg-gray-100 text-gray-400 rounded-full text-sm">
                    ‚úì {{ t }}
                </span>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- File Location -->
    <div class="card bg-gray-50">
        <h3 class="font-medium mb-2">üí° Tip: Edit tickers.txt directly</h3>
        <p class="text-sm text-gray-600">
            You can also edit the <code class="bg-white px-2 py-1 rounded">tickers.txt</code> file 
            directly in any text editor. Changes take effect immediately.
        </p>
    </div>
</div>
{% endblock %}
